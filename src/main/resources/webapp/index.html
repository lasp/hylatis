<html>
  <head>
    <title>Hylatis</title>

    <style>
     .outer {
       display: inline;
     }

     .rgb-box label {
       display: inline-block;
       text-align: left;
       width: 15px;
     }

     .no-border {
       border: none;
     }
    </style>

    <script>
     window.onload = function () {
       document.getElementById("sub").onclick = function () {
         const r = document.getElementById("r").value;
         const g = document.getElementById("g").value;
         const b = document.getElementById("b").value;

         const latN = document.getElementById("lat-n").value;
         const latS = document.getElementById("lat-s").value;
         const lonE = document.getElementById("lon-e").value;
         const lonW = document.getElementById("lon-w").value;

         const spacecraft =
           document.querySelector("input[name=spacecraft]:checked").value;
         const nPx = 1e5;

         const root = `/latis-hylatis/dap/${spacecraft}.png`;

         // Assuming RGB are given.
         const rgb = `rgbPivot(wavelength,${r},${g},${b})`;

         // The bounding box is optional.
         const boxDefined =
           [latN, latS, lonE, lonW].every(x => x.length > 0);
         const box =
           (boxDefined) ? `&bbox(${lonW},${latS},${lonE},${latN},${nPx})` : "";

         const url = `${root}?${rgb}${box}`;
         window.location.href = url;
       };
     };
    </script>
  </head>
  <body>
    <h1>Hylatis</h1>
    <fieldset class="outer">
      <legend>RGB Image</legend>

      <fieldset>
        <legend>Spacecraft</legend>

        <label for="hysics">HySICS</label>
        <input type="radio" id="hysics" value="hysics" name="spacecraft" checked>

        <label for="goes">GOES</label>
        <input type="radio" id="goes" value="goes" name="spacecraft">
      </fieldset>

      <fieldset class="rgb-box">
        <legend>RGB Wavelengths</legend>

        <label for="r">R</label>
        <input id="r" type="number" min="0">
        <br>

        <label for="g">G</label>
        <input id="g" type="number" min="0">
        <br>

        <label for="b">B</label>
        <input id="b" type="number" min="0">
      </fieldset>

      <fieldset>
        <legend>Bounding Box</legend>

        <fieldset class="no-border">
          <legend>NW Corner</legend>

          <input id="lat-n" type="number">
          <label for="lat-n">째N</label>

          <input id="lon-w" type="number">
          <label for="lon-w">째E</label>
        </fieldset>

        <fieldset class="no-border">
          <legend>SE Corner</legend>

          <input id="lat-s" type="number">
          <label for="lat-s">째N</label>

          <input id="lon-e" type="number">
          <label for="lon-e">째E</label>
        </fieldset>
      </fieldset>
      <br>

      <button type="button" id="sub">Generate</button>
    </fieldset>
  </body>
</html>
